# Проект "Акинатор"
## Краткое описание проекта
Основной целью данного проекта является разработка консольного приложения, схожего по функционалу с сайтом [Akinator.com](https://en.akinator.com/). 
Это приложение должно уметь хранить информацию об объектах, выдавать её по запросам и уметь сравнивать объекты. Также должна быть реализована возможность угадывания объекта по бинарным вопросам (да/нет).

Данная проектная работа является частью курса "Основы промышленного программирования" от [И.Р. Дединского](https://github.com/ded32) на Факультете Радиотехники и Компьютерных Технологий (ФРКТ) МФТИ. Задание носит обучающий характер.

## Описание задачи

Так как сайт [Akinator.com](https://en.akinator.com/) создавался в развлекательных целях, работа нашей программы будет своего рода игрой, в которую играют пользователь и компьютер.
Необходимо реализовать 3 режима работы программы:
1. __Угадывание__. Пользователь сначала загадывает человека или объект. Компьютер задает вопросы, на которые можно ответить только "Да" или "Нет". Пользователь вводит эти ответы, а задача компьютера угадать, какой объект был загадан.
2. __Определение объекта__. Компьютер должен уметь по запросу пользователя выдавать описание того или иного объекта.
3. __Сравнение объектов__. Компьютер должен уметь сравнивать 2 объекта, которые вводит пользователь.

## Инструменты и реализация

Для достижения поставленных целей будем использовать языки С и С++.

Программа использует простейшую базу данных, которая хранится в `.txt` файле в соответствующей папке (DataBases).

База данных представляет из себя __бинарное дерево__, в каждом нелистовом узле которого хранится бинарный вопрос (например, _"Human?"_). Каждый лист этого дерева содержит объект, который является ответом на тот или иной вопрос (например, _"Messi"_ в качестве утвердительного ответа на вопрос _"Footballer?"_).

Для визуализации дерева использован модуль `GraphViz`, позволяющий создавать картинку графа в формате `.png`. Сначала на языке разметки `GraphViz` создаётся `.dot` файл, 
который в последствии конвертируется самим модулем в `.png`-изображение.

Графическое представление дерева используется в том числе в отладочных целях. Изображения вставляются в файл `htmldump.html`, который можно открыть через браузер и посмотреть, как изменялось дерево базы данных на протяжении работы программы. Для однократного вывода дерева в этот файл используется функция `HTMLDump()`, которая должна быть вызвана в соответствующих частях программы.

Также для озвучивания вопросов и утверждений компьютера использован консольный синтезатор речи `eSpeak`. Взамодействие пользователя с программой происходит на _английском_ языке.

Документации к вышеперечисленным модулям можно найти тут: [`eSpeak`](https://ubunlog.com/ru/espeak-convierte-texto-a-voz-terminal/), [`GraphViz`](https://graphviz.org/download/).

## Логика работы программы

Угадывание объекта осуществляется путем спуска по дереву, т.е. программа последовательно задаёт вопросы из нелистовых узлов, и, в зависимости от ответов пользователя, выбирает "траекторию спуска". Когда программа доходит до листа, она высказывает свою версию загаданного объекта (например, _"Is it Messi?"_). Если эта версия неправильная, программа признает поражение и предлагает ввести загаданный объект, чтобы внести его в базу данных.
   
Вывод определения на экран осуществляется путем прямого обхода дерева (_Preorder_) и поиска объекта, введенного пользователем. В нашем случае необходимо хранить "историю обхода", т.е. последовательность узлов (начиная с корневого), являющихся предками для анализируемого. Для этого создан специальный массив `way_down`. Когда объект найден, программа просто выводит всех предков найденного узла в нужном порядке. Если объект во всем дереве не найден, программа выдает соответствующее сообщение.

Аналогичным образом осуществляется сравнение двух объектов. Только в этом случае нам нужно два прямых обхода и, соответственно, два массива `way_down1` и `way_down2`. После нахождения обоих объектов происходит поэлементное сравнение массивов `way_down1` и `way_down2`. Совпадающие элементы выводятся как "Сходства" (_Similarities_), а различные - как "Различия" (_Differences_).

## Управление режимами

Так как в программе реализовано несколько режимов, их можно переключать через "Главное меню". Программа выводит следующее сообщение:
```"Type 'e' to exit, 'g' to guess, 'd' to see the definition of an object, 'c' to compare objects"```
Соответственно необходимо ввести _ровно одну букву_:
- 'e' - выход из программы
- 'g' - режим угадывания
- 'd' - режим вывода определения
- 'c' - режим сравнения
В режиме угадывания в качестве ответов нужно вводить _ровно одну букву_: 
- 'y' - ответ "Да"
- 'n' - ответ "Нет"

Программа в процессе работы сама информирует о требуемых от пользователя действиях. В случае некорректного ввода со стороны пользователя программа будет __повторять свой запрос__.

Для экстренного выхода из программы необходимо дважды нажать `CTRL + C`. Это действие вызовет клавиатурное прерывание, которое завершит программу. При этом изменения в базе данных, внесенные во время текущего запуска, __не будут сохранены__.

## Cборка проекта
Чтобы запустить программу, необходимо использовать Makefile, прилагающийся к проекту. Для этого нужно клонировать этот репозиторий на ваш компьютер:
```git clone git@github.com:MatveevDmtr/Akinator.git```  
Далее необходимо в теминале из папки репозитория написать "make". 
В самом Makefile есть следующие переменные и флаги:
- `-DLOGGING` (флаг): включает логирование;
- `-OPTFLAG` (переменная): нужна для выбора оптимизации (-O0, -O1, -O2, -O3 or -Ofast);
- `-CFLAGS` (переменная): содержит флаги компиляции.

По умолчанию установлен флаг оптимизации `-O0`. В целях безопасности работы программы не рекомендуется использованить флаги выше `-O2`.

## Параметры компьютера
Данная версия программы стабильно работает для операционных систем Ubuntu/Linux. При смене системы могут возникнуть проблемы с форматом исполняемого файла, а также с работой модулей `GraphViz` и `eSpeak`.

## Заключение

В данном проекте реализована программа, представляющая из себя своеобразную игру. Несмотря на то, что этот проект в значительной степени является обучающим, программа имеет достаточно обширный функционал. Эту игру можно использовать как для детских развлечений, так и для изучения принципов работы с бинарным деревом.